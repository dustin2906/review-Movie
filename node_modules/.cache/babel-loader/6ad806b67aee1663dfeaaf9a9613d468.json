{"ast":null,"code":"import _objectSpread from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{API_URL,API_KEY,IMAGE_BASE_URL,POSTER_SIZE,BACKDROP_SIZE}from'../../config';import HeroImage from'../elements/HeroImage/HeroImage';import SearchBar from'../elements/SearchBar/SearchBar';import FourColGrid from'../elements/FourColGrid/FourColGrid';import MovieThumb from'../elements/MovieThumb/MovieThumb';import LoadMoreBtn from'../elements/LoadMoreBtn/LoadMoreBtn';import Spinner from'../elements/Spinner/Spinner';import'./Home.css';var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],heroImage:null,loading:false,currentPage:0,totalPage:0,searchTerm:''};_this.searchItems=function(searchTerm){console.log(searchTerm);var endpoint='';_this.setState({movies:[],loading:true,searchTerm:searchTerm});if(searchTerm===''){endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=1\");}else{endpoint=\"\".concat(API_URL,\"search/movie?api_key=\").concat(API_KEY,\"&language=en-US&query=\").concat(searchTerm);}_this.fetchItems(endpoint);};_this.loadMoreItems=function(){var endpoint='';_this.setState({loading:true});if(_this.state.searchTerm===''){endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=\").concat(_this.state.currentPage+1);}else{endpoint=\"\".concat(API_URL,\"search/movie?api_key=\").concat(API_KEY,\"&language=en-US&query=\").concat(_this.state.searchTerm,\"&page=\").concat(_this.state.currentPage+1);}_this.fetchItems(endpoint);};_this.fetchItems=function(endpoint){fetch(endpoint).then(function(result){return result.json();}).then(function(result){_this.setState({movies:[].concat(_toConsumableArray(_this.state.movies),_toConsumableArray(result.results)),heroImage:_this.state.heroImage||result.results[0],loading:false,currentPage:result.page,totalPage:result.total_pages},function(){if(_this.state.searchTerm===\"\"){localStorage.setItem('HomeState',JSON.stringify(_this.state));}});}).catch(function(error){return console.error('Error:',error);});};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem('HomeState')){var state=JSON.parse(localStorage.getItem('HomeState'));this.setState(_objectSpread({},state));}else{this.setState({loading:true});var endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=1\");this.fetchItems(endpoint);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"rmdb-home\"},this.state.heroImage?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(HeroImage,{image:\"\".concat(IMAGE_BASE_URL).concat(BACKDROP_SIZE).concat(this.state.heroImage.backdrop_path),title:this.state.heroImage.original_title,text:this.state.heroImage.overview}),/*#__PURE__*/React.createElement(SearchBar,{callback:this.searchItems})):null,/*#__PURE__*/React.createElement(\"div\",{className:\"rmdb-home-grid\"},/*#__PURE__*/React.createElement(FourColGrid,{header:this.state.searchTerm?'Search Result':'Popular Movies',loading:this.state.loading},this.state.movies.map(function(element,i){return/*#__PURE__*/React.createElement(MovieThumb,{key:i,clickable:true,image:element.poster_path?\"\".concat(IMAGE_BASE_URL).concat(POSTER_SIZE,\"/\").concat(element.poster_path):'./images/no_image.jpg',movieId:element.id,movieName:element.original_title});})),this.state.loading?/*#__PURE__*/React.createElement(Spinner,null):null,this.state.currentPage<=this.state.totalPage&&!this.state.loading?/*#__PURE__*/React.createElement(LoadMoreBtn,{text:\"Load More\",onClick:this.loadMoreItems}):null));}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["E:/LearningCoding/LearningReact/reactMovie/src/components/Home/Home.js"],"names":["React","Component","API_URL","API_KEY","IMAGE_BASE_URL","POSTER_SIZE","BACKDROP_SIZE","HeroImage","SearchBar","FourColGrid","MovieThumb","LoadMoreBtn","Spinner","Home","state","movies","heroImage","loading","currentPage","totalPage","searchTerm","searchItems","console","log","endpoint","setState","fetchItems","loadMoreItems","fetch","then","result","json","results","page","total_pages","localStorage","setItem","JSON","stringify","catch","error","getItem","parse","backdrop_path","original_title","overview","map","element","i","poster_path","id"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { API_URL, API_KEY, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE} from '../../config';\r\nimport HeroImage from '../elements/HeroImage/HeroImage';\r\nimport SearchBar from '../elements/SearchBar/SearchBar';\r\nimport FourColGrid from '../elements/FourColGrid/FourColGrid';\r\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\r\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\r\nimport Spinner from '../elements/Spinner/Spinner';\r\nimport './Home.css';\r\n\r\nclass Home extends Component {\r\n  state = {\r\n    movies: [],\r\n    heroImage: null,\r\n    loading: false,\r\n    currentPage: 0,\r\n    totalPage: 0,\r\n    searchTerm: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    if(localStorage.getItem('HomeState')) {\r\n      const state = JSON.parse(localStorage.getItem('HomeState'));\r\n      this.setState({...state});\r\n    } else {\r\n      this.setState({ loading: true });\r\n      const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\r\n      this.fetchItems(endpoint);\r\n    }\r\n  }\r\n\r\n  searchItems = (searchTerm) => {\r\n    console.log(searchTerm);\r\n    let endpoint = '';\r\n    this.setState({ \r\n      movies: [],\r\n      loading: true,\r\n      searchTerm\r\n    })\r\n\r\n    if(searchTerm === '') {\r\n      endpoint =`${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\r\n    } else {\r\n      endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${searchTerm}`;\r\n    }\r\n    this.fetchItems(endpoint);\r\n  }\r\n\r\n  loadMoreItems = () => {\r\n    let endpoint = '';\r\n    this.setState({ loading: true });\r\n\r\n    if(this.state.searchTerm === '') {\r\n      endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this.state.currentPage +1}`;\r\n    } else {\r\n      endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${this.state.searchTerm}&page=${this.state.currentPage + 1}`;\r\n    }\r\n    this.fetchItems(endpoint);\r\n  }\r\n\r\n  fetchItems = (endpoint) => {\r\n    fetch(endpoint)\r\n    .then(result => result.json())\r\n    .then(result => {\r\n      this.setState({\r\n        movies: [...this.state.movies, ...result.results],\r\n        heroImage: this.state.heroImage || result.results[0],\r\n        loading: false,\r\n        currentPage: result.page,\r\n        totalPage: result.total_pages\r\n      }, () => {\r\n        if(this.state.searchTerm === \"\") {\r\n          localStorage.setItem('HomeState', JSON.stringify(this.state));\r\n        }\r\n      })\r\n    })\r\n    .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  \r\nrender() {\r\n  return (\r\n    <div className=\"rmdb-home\">\r\n    {this.state.heroImage ? \r\n      <div>\r\n        <HeroImage \r\n          image={`${IMAGE_BASE_URL}${BACKDROP_SIZE}${this.state.heroImage.backdrop_path}`}\r\n          title={this.state.heroImage.original_title}\r\n          text={this.state.heroImage.overview}\r\n        />\r\n        <SearchBar callback={this.searchItems} />\r\n      </div> : null }\r\n      <div className=\"rmdb-home-grid\">\r\n        <FourColGrid\r\n          header={this.state.searchTerm ? 'Search Result' : 'Popular Movies'}\r\n          loading={this.state.loading}\r\n          >\r\n          {this.state.movies.map( (element, i) => {\r\n            return <MovieThumb\r\n                      key={i}\r\n                      clickable={true}\r\n                      image={element.poster_path ? `${IMAGE_BASE_URL}${POSTER_SIZE}/${element.poster_path}`: './images/no_image.jpg'} \r\n                      movieId={element.id}\r\n                      movieName={element.original_title}\r\n                    />\r\n          })}\r\n          </FourColGrid>\r\n            {this.state.loading ? <Spinner/> : null}\r\n            {(this.state.currentPage <= this.state.totalPage && !this.state.loading) ? <LoadMoreBtn text=\"Load More\" onClick={this.loadMoreItems} /> :null }\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n}\r\n\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}