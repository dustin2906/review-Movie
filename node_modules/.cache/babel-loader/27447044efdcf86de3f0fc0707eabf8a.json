{"ast":null,"code":"import _objectSpread from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\LearningCoding\\\\LearningReact\\\\reactMovie\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{API_URL,API_KEY}from'../../config';import Navigation from'../elements/Navigation/Navigation';import MovieInfo from'../elements/MovieInfo/MovieInfo';import MovieInfoBar from'../elements/MovieInfoBar/MovieInfoBar';import FourColGrid from'../elements/FourColGrid/FourColGrid';import Spinner from'../elements/Spinner/Spinner';import Actor from'../elements/Actor/Actor';import'./Movie.css';var Movie=/*#__PURE__*/function(_Component){_inherits(Movie,_Component);var _super=_createSuper(Movie);function Movie(){var _this;_classCallCheck(this,Movie);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movie:null,actors:null,directors:[],loading:false};_this.fetchItems=function(endpoint){fetch(endpoint).then(function(result){return result.json();}).then(function(result){console.log(result);if(result.status.code){_this.setState({loading:false});}else{_this.setState({movie:result},function(){//... then fetch actors in the setState callback function\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(_this.props.match.params.movieId,\"/credits?api_key=\").concat(API_KEY);fetch(endpoint).then(function(result){return result.json();}).then(function(result){var directors=result.crew.filter(function(member){return member.job===\"Director\";});_this.setState({actors:result.cast,directors:directors,loading:false},function(){localStorage.setItem(\"\".concat(_this.props.match.params.movieId),JSON.stringify(_this.state));});});});}}).catch(function(error){return console.error('Error:',error);});};return _this;}_createClass(Movie,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem(\"\".concat(this.props.match.params.movieId))){var state=JSON.parse(localStorage.getItem(\"\".concat(this.props.match.params.movieId)));this.setState(_objectSpread({},state));}else{this.setState({loading:true});// First fetch the movie...\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(this.props.match.params.movieId,\"?api_key=\").concat(API_KEY,\"&language=en-US\");this.fetchItems(endpoint);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"rmdb-movie\"},this.state.movie?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navigation,{movie:this.props.location.movieName}),/*#__PURE__*/React.createElement(MovieInfo,{movie:this.state.movie,directors:this.state.directors}),/*#__PURE__*/React.createElement(MovieInfoBar,{time:this.state.movie.runtime,budget:this.state.movie.budget,revenue:this.state.movie.revenue})):null,this.state.actors?/*#__PURE__*/React.createElement(\"div\",{className:\"rmdb-movie-grid\"},/*#__PURE__*/React.createElement(FourColGrid,{header:'Actors'},this.state.actors.map(function(element,i){return/*#__PURE__*/React.createElement(Actor,{key:i,actor:element});}))):null,!this.state.actors&&!this.state.loading?/*#__PURE__*/React.createElement(\"h1\",null,\" No Movie \"):null,this.state.loading?/*#__PURE__*/React.createElement(Spinner,null):null);}}]);return Movie;}(Component);export default Movie;","map":{"version":3,"sources":["E:/LearningCoding/LearningReact/reactMovie/src/components/Movie/Movie.js"],"names":["React","Component","API_URL","API_KEY","Navigation","MovieInfo","MovieInfoBar","FourColGrid","Spinner","Actor","Movie","state","movie","actors","directors","loading","fetchItems","endpoint","fetch","then","result","json","console","log","status","code","setState","props","match","params","movieId","crew","filter","member","job","cast","localStorage","setItem","JSON","stringify","catch","error","getItem","parse","location","movieName","runtime","budget","revenue","map","element","i"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { API_URL, API_KEY} from '../../config';\r\nimport Navigation from '../elements/Navigation/Navigation';\r\nimport MovieInfo from '../elements/MovieInfo/MovieInfo';\r\nimport MovieInfoBar from '../elements/MovieInfoBar/MovieInfoBar';\r\nimport FourColGrid from '../elements/FourColGrid/FourColGrid';\r\nimport Spinner from '../elements/Spinner/Spinner';\r\nimport Actor from '../elements/Actor/Actor';\r\nimport './Movie.css';\r\n\r\nclass Movie extends Component {\r\n  state = {\r\n    movie: null,\r\n    actors: null,\r\n    directors: [],\r\n    loading: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    if( localStorage.getItem(`${this.props.match.params.movieId}`)) {\r\n      const state = JSON.parse(localStorage.getItem(`${this.props.match.params.movieId}`));\r\n      this.setState({ ...state});\r\n    } else {\r\n      this.setState({ loading: true})\r\n      // First fetch the movie...\r\n      const endpoint = `${API_URL}movie/${this.props.match.params.movieId}?api_key=${API_KEY}&language=en-US`\r\n      this.fetchItems(endpoint);\r\n    }\r\n  }\r\n\r\n  fetchItems = (endpoint) => {\r\n    fetch(endpoint) \r\n    .then(result => result.json())\r\n    .then(result => {\r\n      console.log(result)\r\n      if(result.status.code) {\r\n        this.setState({ loading: false});\r\n      } else {\r\n        this.setState({ movie: result}, () => {\r\n          //... then fetch actors in the setState callback function\r\n          const endpoint = `${API_URL}movie/${this.props.match.params.movieId}/credits?api_key=${API_KEY}`\r\n          fetch(endpoint)\r\n          .then(result => result.json())\r\n          .then(result => {\r\n            const directors = result.crew.filter( (member) => member.job === \"Director\");\r\n\r\n            this.setState({\r\n              actors: result.cast,\r\n              directors,\r\n              loading: false\r\n            }, () => {\r\n              localStorage.setItem(`${this.props.match.params.movieId}`, JSON.stringify(this.state));\r\n            })\r\n          })\r\n        })\r\n      }\r\n    })\r\n    .catch(error => console.error('Error:', error))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"rmdb-movie\">\r\n        {this.state.movie ? \r\n          <div>\r\n            <Navigation movie={this.props.location.movieName} />\r\n            <MovieInfo movie={this.state.movie} directors={this.state.directors}/>\r\n            <MovieInfoBar time={this.state.movie.runtime} budget={this.state.movie.budget} revenue={this.state.movie.revenue} />   \r\n          </div>\r\n        : null }\r\n\r\n        {this.state.actors ?\r\n          <div className=\"rmdb-movie-grid\">\r\n            <FourColGrid header={'Actors'}> \r\n            {this.state.actors.map( (element, i) => {\r\n              return (\r\n                <Actor key={i} actor={element} />\r\n              ) \r\n            })}\r\n            </FourColGrid>\r\n          </div>\r\n            : null }\r\n            {!this.state.actors && !this.state.loading ? <h1> No Movie </h1> : null}\r\n            {this.state.loading ? <Spinner /> :null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Movie;"]},"metadata":{},"sourceType":"module"}